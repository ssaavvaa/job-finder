{"version":3,"sources":["webpack:///./src/pages/auth/sign-in.js"],"names":["initialState","email","password","SignInBody","withAuth","reFetchObservableQueries","useState","state","setState","setStateValue","e","target","name","value","useMutation","SIGN_IN_USER","variables","lang","onError","error","ErrorAlert","onCompleted","signInUser","setCookie","token","attrs","className","stl","background","onSubmit","preventDefault","handleSignIn","form","style","color","autoComplete","onChange","type","placeholder","loading","disabled","SignIn","headerStyle","title"],"mappings":"0NAWMA,EAAe,CACjBC,MAAM,KACNC,SAAS,MAIPC,EAAaC,aAAS,YAAiC,IAA/BC,EAA8B,EAA9BA,yBAA8B,EAEhCC,mBAASN,GAA9BO,EAFqD,KAE7CC,EAF6C,KAItDC,EAAgB,SAAAC,GAAM,IAAD,EACvBF,EAAS,OAAD,UAAKD,IAAL,MAAcG,EAAEC,OAAOC,MAAMF,EAAEC,OAAOE,MAAtC,MALgD,EAY7BC,YAAYC,IAAe,CACtDC,UAAW,CAAEf,MAAMM,EAAMN,MAAQC,SAASK,EAAML,SAAWe,KAAK,MAChEC,QAAQ,SAACC,GAAD,OAAWC,YAAWD,IAC9BE,YAAY,YAAmB,IAAjBC,EAAgB,EAAhBA,WACVC,YAAU,QAAUD,EAAWE,MAAQ,GACvCnB,OALAiB,EAZoD,KAYvCG,EAZuC,KA0BxD,OACI,yBAAKC,UAAaC,IAAIC,YACnB,0BAAMC,SAAY,SAACnB,GAAD,OAPP,SAAAA,GACpBA,EAAEoB,iBACFR,IAKkCS,CAAarB,IAAIgB,UAAaC,IAAIK,MACvD,oCAAS,0BAAMC,MAAO,CAACC,MAAM,UAApB,OACT,2BAAOC,aAAa,KAAKvB,KAAO,QAAQwB,SAAY,SAAA1B,GAAC,OAAID,EAAcC,IAAI2B,KAAO,OAAOC,YAAc,sBACvG,2BAAOH,aAAa,KAAKvB,KAAO,WAAWwB,SAAY,SAAA1B,GAAC,OAAID,EAAcC,IAAI2B,KAAO,WAAWC,YAAc,aAC9G,6BAAIb,EAAMc,SAAU,8CACpB,4BAASC,UAxBZjC,EAAMN,QAAUM,EAAML,SAwBcmC,KAAO,UAAxC,eAaAI,UAPA,kBACX,kBAAC,IAAD,CAASC,YAAeA,IAAazB,KAAO,MACxC,kBAAC,IAAD,CAAK0B,MAAQ,YACb,kBAACxC,EAAD","file":"component---src-pages-auth-sign-in-js-e5666d8751f42af86217.js","sourcesContent":["import React , { useState }  from \"react\"\r\nimport Layout from \"../../components/layout\"\r\nimport SEO from '../../components/seo'\r\nimport stl from '../../STYLES/AUTH/sign-in-up.module.scss'\r\nimport { useMutation} from '@apollo/react-hooks';\r\nimport { SIGN_IN_USER } from '../../queries/index'\r\nimport { setCookie } from '../../helpers/index'\r\nimport { ErrorAlert } from '../../helpers/index'\r\nimport headerStyle from '../../STYLES/HEADER/header-nobg.module.scss';\r\nimport { withAuth } from '../../components/ifAuth'\r\n\r\nconst initialState = {\r\n    email:null,\r\n    password:null\r\n}\r\n\r\n\r\nconst SignInBody = withAuth(({reFetchObservableQueries}) => {\r\n\r\nconst [state , setState ] = useState(initialState)\r\n\r\nconst setStateValue = e => {\r\n    setState({...state , [e.target.name]:e.target.value})\r\n}\r\n\r\nconst disabled = () => {\r\n    return !state.email || !state.password\r\n}\r\n\r\nconst [ signInUser , attrs ] = useMutation(SIGN_IN_USER , {\r\n    variables: { email:state.email , password:state.password , lang:\"en\"},\r\n    onError:(error) => ErrorAlert(error),\r\n    onCompleted:({signInUser}) => {\r\n        setCookie('token' , signInUser.token , 1);\r\n        reFetchObservableQueries()\r\n    }\r\n});\r\n\r\nconst handleSignIn =  e => {\r\n  e.preventDefault()\r\n  signInUser()\r\n}\r\n\r\n    return (\r\n        <div className = {stl.background}>\r\n           <form onSubmit = {(e) => handleSignIn(e)} className = {stl.form}>\r\n               <h1>SIGN <span style={{color:'coral'}}>IN</span></h1>\r\n               <input autoComplete=\"on\" name = 'email' onChange = {e => setStateValue(e)} type = 'text' placeholder = 'email or username' />\r\n               <input autoComplete=\"on\" name = 'password' onChange = {e => setStateValue(e)} type = 'password' placeholder = \"password\" />\r\n               <p>{attrs.loading ? <p>Signing in ...</p> : false}</p>\r\n               <button  disabled = {disabled()} type = 'submit'>Submit</button>\r\n           </form>\r\n           </div>\r\n    )\r\n})\r\n\r\nconst SignIn = () => (\r\n    <Layout  headerStyle = {headerStyle} lang = 'en' >\r\n        <SEO title = 'sign-in' />\r\n        <SignInBody />\r\n    </Layout>\r\n)\r\n\r\nexport default SignIn"],"sourceRoot":""}